{% if is_granted('ROLE_ADMIN') %}
    <h1>Toutes les réclamations</h1>
{% else %}
    <h1>Mes réclamations</h1>
{% endif %}

<table border="1">
    <tr>
        <th>ID</th>
        <th>Message</th>
        <th>Date</th>
        <th>Statut</th>
        {% if is_granted('ROLE_ADMIN') %}
            <th>Actions</th>
        {% endif %}
    </tr>

    {% for reclamation in reclamations %}
        <tr>
            <td>{{ reclamation.id }}</td>
            <td>{{ reclamation.message }}</td>
            <td>{{ reclamation.date|date('Y-m-d') }}</td>
            <td>{{ reclamation.statut }}</td>
            {% if is_granted('ROLE_ADMIN') %}
                <td>
                    {% if reclamation.statut == 'En attente' %}
                        <a href="{{ path('app_reclamation_traiter_page', {'id': reclamation.id}) }}">Traiter</a>
                    {% else %}
                        Déjà traitée
                    {% endif %}
                </td>
            {% endif %}
        </tr>
    {% else %}
        <tr>
            <td colspan="5">Aucune réclamation pour le moment.</td>
        </tr>
    {% endfor %}
</table>

{% if not is_granted('ROLE_ADMIN') %}
    <a href="{{ path('app_reclamation_new') }}">Nouvelle réclamation</a>
{% endif %}
